{"version":3,"file":"use-resize-observer.js","sources":["../../src/use-resize-observer/use-resize-observer.ts"],"sourcesContent":["import { useMemo, useRef, useState, useCallback } from 'react';\n\ntype ObserverRect = Omit<DOMRectReadOnly, 'toJSON'>;\n\nconst defaultState: ObserverRect = {\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0,\n  top: 0,\n  left: 0,\n  bottom: 0,\n  right: 0,\n};\n\nexport function useResizeObserver<T extends HTMLElement = any>() {\n  const frameID = useRef(0);\n  const [rect, setRect] = useState<ObserverRect>(defaultState);\n\n  const observer = useMemo(\n    () =>\n      typeof window !== 'undefined'\n        ? new ResizeObserver((entries: any) => {\n            const entry = entries[0];\n\n            if (entry) {\n              cancelAnimationFrame(frameID.current);\n\n              frameID.current = requestAnimationFrame(() => {\n                setRect(entry.contentRect);\n              });\n            }\n          })\n        : null,\n    []\n  );\n\n  const cleanup = useRef<() => void>();\n\n  const ref = useCallback(\n    (node: T) => {\n      if (cleanup.current) {\n        cleanup.current();\n        cleanup.current = undefined;\n      }\n\n      if (node) {\n        setRect(node.getBoundingClientRect());\n\n        if (observer) {\n          observer.observe(node);\n\n          cleanup.current = () => {\n            observer.disconnect();\n            if (frameID.current) {\n              cancelAnimationFrame(frameID.current);\n            }\n          };\n        }\n      }\n    },\n    [observer]\n  );\n\n  return [ref, rect] as const;\n}\n\nexport function useElementSize<T extends HTMLElement = any>() {\n  const [ref, { width, height }] = useResizeObserver<T>();\n  return { ref, width, height };\n}\n"],"names":["useRef","useState","useMemo","useCallback"],"mappings":";;;;;;AACA,MAAM,YAAY,GAAG;AACrB,EAAE,CAAC,EAAE,CAAC;AACN,EAAE,CAAC,EAAE,CAAC;AACN,EAAE,KAAK,EAAE,CAAC;AACV,EAAE,MAAM,EAAE,CAAC;AACX,EAAE,GAAG,EAAE,CAAC;AACR,EAAE,IAAI,EAAE,CAAC;AACT,EAAE,MAAM,EAAE,CAAC;AACX,EAAE,KAAK,EAAE,CAAC;AACV,CAAC,CAAC;AACK,SAAS,iBAAiB,GAAG;AACpC,EAAE,MAAM,OAAO,GAAGA,YAAM,CAAC,CAAC,CAAC,CAAC;AAC5B,EAAE,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAGC,cAAQ,CAAC,YAAY,CAAC,CAAC;AACjD,EAAE,MAAM,QAAQ,GAAGC,aAAO,CAAC,MAAM,OAAO,MAAM,KAAK,WAAW,GAAG,IAAI,cAAc,CAAC,CAAC,OAAO,KAAK;AACjG,IAAI,MAAM,KAAK,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AAC7B,IAAI,IAAI,KAAK,EAAE;AACf,MAAM,oBAAoB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;AAC5C,MAAM,OAAO,CAAC,OAAO,GAAG,qBAAqB,CAAC,MAAM;AACpD,QAAQ,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;AACnC,OAAO,CAAC,CAAC;AACT,KAAK;AACL,GAAG,CAAC,GAAG,IAAI,EAAE,EAAE,CAAC,CAAC;AACjB,EAAE,MAAM,OAAO,GAAGF,YAAM,EAAE,CAAC;AAC3B,EAAE,MAAM,GAAG,GAAGG,iBAAW,CAAC,CAAC,IAAI,KAAK;AACpC,IAAI,IAAI,OAAO,CAAC,OAAO,EAAE;AACzB,MAAM,OAAO,CAAC,OAAO,EAAE,CAAC;AACxB,MAAM,OAAO,CAAC,OAAO,GAAG,KAAK,CAAC,CAAC;AAC/B,KAAK;AACL,IAAI,IAAI,IAAI,EAAE;AACd,MAAM,OAAO,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC;AAC5C,MAAM,IAAI,QAAQ,EAAE;AACpB,QAAQ,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AAC/B,QAAQ,OAAO,CAAC,OAAO,GAAG,MAAM;AAChC,UAAU,QAAQ,CAAC,UAAU,EAAE,CAAC;AAChC,UAAU,IAAI,OAAO,CAAC,OAAO,EAAE;AAC/B,YAAY,oBAAoB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;AAClD,WAAW;AACX,SAAS,CAAC;AACV,OAAO;AACP,KAAK;AACL,GAAG,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC;AACjB,EAAE,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;AACrB,CAAC;AACM,SAAS,cAAc,GAAG;AACjC,EAAE,MAAM,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,GAAG,iBAAiB,EAAE,CAAC;AACvD,EAAE,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC;AAChC;;;;;"}